function pullJSON(a){allCards=[],filteredCards=[],rareFilteredCards=[],odds=[],rareOdds=[],$.getJSON("https://api.hearthstonejson.com/v1/22611/enUS/cards.collectible.json?",function(e){allCards=e,sortSet(a)})}function setPacks(){for(var a=0;a<4;a++)randomCard();randomRareCard(),displayPack()}function displayPack(){for(var a=chance.shuffle(pack),e=0;e<a.length;e++)$(".list").append(a[e])}function randomCard(){card=chance.weighted(filteredCards,odds),imgURL=["https://media.services.zam.com/v1/media/byName/hs/cards/enus/"+card.id+".png","https://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/"+card.id+'_premium.gif"data-is-gold="true'],goldChance=[98,2],isGold=chance.weighted(imgURL,goldChance);var a=card.rarity;value="COMMON"==a?10:"RARE"==a?60:"EPIC"==a?120:"LEGENDARY"==a?240:0;var e=isGold,d='<div class="flip"><div class="card" data-card-value="'+value+'"><div class="face front '+a+'"><img class="img-back" src="../images/back.png"></div><div class="face back"><img class="img-front '+a+'" src="'+e+'"></div></div></div>';pack.push(d)}function randomRareCard(){card=chance.weighted(rareFilteredCards,rareOdds),imgURL=["https://media.services.zam.com/v1/media/byName/hs/cards/enus/"+card.id+".png","https://media.services.zam.com/v1/media/byName/hs/cards/enus/animated/"+card.id+'_premium.gif"data-is-gold="true'],goldChance=[98,2],isGold=chance.weighted(imgURL,goldChance);var a=card.rarity;value="COMMON"==a?10:"RARE"==a?60:"EPIC"==a?120:"LEGENDARY"==a?240:0;var e=isGold,d='<div class="flip"><div class="card" data-card-value="'+value+'"><div class="face front '+a+'"><img class="img-back" src="../images/back.png"></div><div class="face back"><img class="img-front '+a+'" src="'+e+'"></div></div></div>';pack.push(d)}function sortSet(a){for(var e=0;e<allCards.length;e++)allCards[e].set==a&&("COMMON"!=allCards[e].rarity&&rareFilteredCards.push(allCards[e]),filteredCards.push(allCards[e]));setRarity()}function setRarity(){for(var a=0;a<filteredCards.length;a++)"COMMON"==filteredCards[a].rarity&&odds.push(71),"RARE"==filteredCards[a].rarity&&(odds.push(23),rareOdds.push(23)),"EPIC"==filteredCards[a].rarity&&(odds.push(4),rareOdds.push(4)),"LEGENDARY"==filteredCards[a].rarity&&(odds.push(1),rareOdds.push(1))}allCards=[],filteredCards=[],rareFilteredCards=[],odds=[],rareOdds=[],pack=[],packValue=0,$(".btn").click(function(){$(".score").hide(),$(".value--rare").removeClass("value--rare"),$(".value--epic").removeClass("value--epic"),$(".value--legendary").removeClass("value--legendary"),pack=[],packValue=0,$(".flip").remove(),token=$(this).data("pack"),pullJSON(token),setTimeout(setPacks,800)}),$(document.body).on("click",".flip",function(){var a=$(this).find(".card");a.hasClass("flipped")||($(this).find(".img-front").data("is-gold")?packValue+=2*$(this).find(".card").data("card-value"):packValue+=$(this).find(".card").data("card-value")),a.addClass("flipped"),$(".score").show(),$(".value").text(packValue),packValue>=350?$(".value").addClass("value--legendary"):packValue>=250?$(".value").addClass("value--epic"):packValue>=150&&$(".value").addClass("value--rare")}),$(document).ready(function(){$(".btn-wrap").slick({infinite:!0,slidesToShow:8,slidesToScroll:1,dots:!1,responsive:[{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3,arrows:!1,dots:!0}}]})});